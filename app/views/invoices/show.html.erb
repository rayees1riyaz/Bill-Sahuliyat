<div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-10 no-print">
  <div class="bg-white px-8 py-6 rounded-3xl shadow-xl flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0 border border-gray-100">
    <div class="flex items-center space-x-6">
      <%= link_to invoices_path, class: "p-3 rounded-full hover:bg-brand-50 text-gray-400 hover:text-brand-600 transition" do %>
        <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
      <% end %>
      <div>
        <h1 class="text-xl font-black text-gray-900 tracking-tight">Invoice Details</h1>
        <p class="text-xs font-bold text-gray-400 uppercase tracking-widest italic">Viewing #<%= @invoice.invoice_number %></p>
      </div>
    </div>
    
    <div class="flex items-center space-x-4 w-full md:w-auto">
      <%= link_to edit_invoice_path(@invoice), class: "flex-1 md:flex-none inline-flex items-center justify-center px-8 py-3 bg-white text-gray-700 border border-gray-200 rounded-2xl font-black text-sm shadow-sm hover:bg-gray-50 transition transform hover:-translate-y-1 active:scale-95" do %>
        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"></path></svg>
        Edit Bill
      <% end %>

      <%= button_to @invoice, method: :delete, 
                    class: "flex-1 md:flex-none inline-flex items-center justify-center px-6 py-3 bg-white text-red-600 border border-red-100 rounded-2xl font-black text-sm shadow-sm hover:bg-red-50 transition transform hover:-translate-y-1 active:scale-95",
                    data: { turbo_confirm: "Are you sure you want to delete this invoice? This action is permanent." } do %>
        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"></path></svg>
        Delete
      <% end %>

      <button onclick="window.print()" class="flex-1 md:flex-none inline-flex items-center justify-center px-8 py-3 bg-brand-600 text-white rounded-2xl font-black text-sm shadow-xl hover:bg-brand-700 transition transform hover:-translate-y-1 active:scale-95">
        <svg class="w-5 h-5 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"></path></svg>
        Print Bill (A4)
      </button>
    </div>
  </div>
</div>

<div class="invoice-container main-content">
  <div class="invoice-header">
    <div class="brand-section">
      <h1>SAADAT ENTERPRISES</h1>
      <p class="font-bold">DEALS WITH:</p>
      <p>ALL KINDS OF HOME APPLIANCES, MOBILES, LAPTOPS, SOLAR,</p>
      <p>INVERTERS BATTERIES, LED & PRINTERS ETC.</p>
      <p>90 FEET ROAD NEAR SAFA MARWAH HOSPITAL SRINAGAR-190020</p>
      <p>B/O: DR. ALI JAN ROAD SRINAGAR | Email: saadatenterprises0@gmail.com</p>
      <p>Phone: 9906776815 / 9906871563</p>
      <p class="mt-2 font-bold text-blue-800">GSTIN: 01BFFPR8956F2Z8</p>
    </div>
    <div class="invoice-info-section">
      <h2>TAX INVOICE</h2>
      <p><strong>Invoice No:</strong> <%= @invoice.invoice_number %></p>
      <p><strong>Date:</strong> <%= @invoice.invoice_date.strftime("%d/%m/%Y") %></p>
      <% if @invoice.financed_by.present? %>
        <p><strong>Financed By:</strong> <%= @invoice.financed_by %></p>
      <% end %>
    </div>
  </div>

  <div class="details-grid">
    <div class="customer-section">
      <h3>Billed To:</h3>
      <p class="text-lg font-bold text-blue-900 mb-1"><%= @invoice.customer_name %></p>
      
      <div class="customer-grid">
        <div class="address-info">
          <p class="whitespace-pre-line text-gray-700 italic"><%= @invoice.customer_address %></p>
        </div>
        <div class="contact-info border-l border-gray-200 pl-4">
          <% if @invoice.customer_phone.present? %>
            <p><span class="font-bold text-gray-500 uppercase text-[9px]">Cell:</span> <span class="font-semibold"><%= @invoice.customer_phone %></span></p>
          <% end %>
          <% if @invoice.customer_email.present? %>
            <p><span class="font-bold text-gray-500 uppercase text-[9px]">Email:</span> <span class="font-semibold"><%= @invoice.customer_email %></span></p>
          <% end %>
          <% if @invoice.customer_gstin.present? %>
            <p class="mt-1 pb-1 border-t border-gray-100 pt-1"><span class="font-bold text-gray-500 uppercase text-[9px]">GSTIN:</span> <span class="font-bold text-blue-800"><%= @invoice.customer_gstin %></span></p>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <div class="table-container">
    <table class="line-items-table">
      <thead>
        <tr>
          <th style="width: 40px; text-align: left;">S.No</th>
          <th style="text-align: left;">Description of Goods</th>
          <th style="width: 50px; text-align: left;">HSN</th>
          <th style="width: 40px; text-align: left;">Qty</th>
          <th style="width: 75px; text-align: left;">Rate</th>
          <th style="width: 85px; text-align: left;">Amount</th>
          <th style="width: 65px; text-align: left;">CGST</th>
          <th style="width: 65px; text-align: left;">SGST</th>
          <th style="width: 85px; text-align: left;">Total</th>
        </tr>
      </thead>
      <tbody>
        <% @invoice.line_items.each_with_index do |item, index| %>
          <tr>
            <td style="text-align: center;"><%= index + 1 %></td>
            <td>
              <%= item.description %>
              <% if item.serial_number.present? %>
                <div class="text-[10px] text-gray-600 mt-1">S.No: <%= item.serial_number %></div>
              <% end %>
            </td>
            <td><%= item.hsn_code %></td>
            <td style="text-align: center;"><%= item.quantity %></td>
            <td style="text-align: right;"><%= number_to_currency(item.rate, unit: "") %></td>
            <td style="text-align: right;"><%= number_to_currency(item.amount, unit: "") %></td>
            <td style="text-align: center;">
              <%= item.cgst_rate %>%<br>
              <span class="text-xs text-gray-500"><%= number_to_currency(item.cgst_amount, unit: "") %></span>
            </td>
            <td style="text-align: center;">
              <%= item.sgst_rate %>%<br>
              <span class="text-xs text-gray-500"><%= number_to_currency(item.sgst_amount, unit: "") %></span>
            </td>
            <td style="text-align: right;"><%= number_to_currency(item.amount + item.cgst_amount + item.sgst_amount, unit: "") %></td>
          </tr>
        <% end %>
      </tbody>
    </table>
  </div>

  <div class="totals-section mt-1">
    <table class="totals-table">
      <tr>
        <td class="font-bold text-gray-600">Sub Total:</td>
        <td style="text-align: right;"><%= number_to_currency(@invoice.sub_total, unit: "₹") %></td>
      </tr>
      <tr>
        <td class="font-bold text-gray-600">CGST Total:</td>
        <td style="text-align: right;"><%= number_to_currency(@invoice.cgst_total, unit: "₹") %></td>
      </tr>
      <tr>
        <td class="font-bold text-gray-600">SGST Total:</td>
        <td style="text-align: right;"><%= number_to_currency(@invoice.sgst_total, unit: "₹") %></td>
      </tr>
      <tr class="grand-total">
        <td class="font-bold">Grand Total:</td>
        <td style="text-align: right;"><%= number_to_currency(@invoice.grand_total, unit: "₹") %></td>
      </tr>
    </table>
  </div>

  <div class="footer-content">
    <div class="bank-details">
      <h3 class="font-bold text-sm uppercase text-gray-500 mb-2">Bank Details:</h3>
      <p><strong>Bank:</strong> J&K Bank</p>
      <p><strong>Account Name:</strong> Saadat Enterprises</p>
      <p><strong>Account No:</strong> 0123040100012345</p>
      <p><strong>IFSC Code:</strong> JAKA0MOVEEP</p>
    </div>


    <div class="signature-section text-center">
      <div style="height: 40px;"></div>
      <p class="border-t border-gray-400 pt-1 font-bold">Authorized Signature</p>
      <p class="text-[10px] text-gray-500 uppercase">For SAADAT ENTERPRISES</p>
    </div>
  </div>

  <div class="mt-4 text-[10px] text-gray-500 border-t pt-2">
    <p><strong>Terms & Conditions:</strong></p>
    <ul class="list-disc list-inside">
      <li>Goods once sold will not be taken back.</li>
      <li>All disputes are subject to Srinagar Jurisdiction only.</li>
      <li>E.&.O.E</li>
    </ul>
  </div>
</div>
